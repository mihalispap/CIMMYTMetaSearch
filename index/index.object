
{
	"settings":
	{
		"index": 
		{
			"routing": 
			{
				"allocation": 
				{
					"include": 
					{
						"zone": "main"
					}
				}
			}
		},
		"number_of_replicas": "0","index.mapping.ignore_malformed": true,

		"analysis":
		{
                        "char_filter":
                        { 
                                "comma_stop_removal":
                                { 
                                        "type": "mapping",
                                        "mappings":
                                        [ 
                                                ", => ",
                                                ". => "
                                        ]
                                }
                        },
			"analyzer":
			{
				"lowercasespaceanalyzer":
				{
					"type":"custom",
					"tokenizer": "whitespace",

					"filter":["lowercase"]
				},
				"remove_comma_stop":
				{
					"tokenizer": "standard",
					"char_filter": ["comma_stop_removal"]
				},
				"ngram_3_15_analyzer":
				{
					"tokenizer": "ngram_3_15_tokenizer"
				}
			},
			"tokenizer":
			{
				"ngram_3_15_tokenizer":
				{
					"type": "nGram",
					"min_gram": "3",
					"max_gram": "15"
				}
			}
		}

	},
	"mappings":
	{
		"object":
		{
			"properties":
			{
				"title":
				{
					"properties":
					{
						"value":
						{
							"type":"string",
							"analyzer":"lowercasespaceanalyzer",
							"tokenizer":"whitespace",
							"search_analyzer":"whitespace",
							"filter":["lowercase"]
						},
						"lang":{"type":"string"}
					}
				},
				"updated": {"format":"dateOptionalTime","type":"date","ignore_malformed":true},
				"created": {"format":"dateOptionalTime","type":"date","ignore_malformed":true},
				"subject":
				{
					"properties":
					{
						"vocabulary":{"type":"string"},
						"score":{"type":"double"},
						"value":
                                                {
                                                        "type":"string",
                                                        "fields":
                                                        {
                                                                "raw":
                                                                {
                                                                        "type":"string",
                                                                        "index":"not_analyzed"
                                                                }
                                                        }
                                                },
						"uri":{"type":"string"}
					}
				},
				"language":
				{
					"properties":{"value":{"type":"string","index":"not_analyzed"},"uri":{"type":"string"}}
				},
				"description":
				{
					"properties":
					{
						"value":
						{
							"type":"string",
							"analyzer":"lowercasespaceanalyzer",
                                                        "tokenizer":"whitespace",
                                                        "search_analyzer":"whitespace",
                                                        "filter":["lowercase"]
						},
						"lang":{"type":"string"}}
				},
				"appid": {"type":"string"},
				"appuri": {"type":"string"}
			}
		},
		"collection":
		{
			"_parent":{"type":"object"},
			"properties":
			{
				"spec": {"type":"string"},
				"name": {"type":"string"},
				"appid": {"type":"string"},
				"appuri": {"type":"string"},
				"about":
				{
					"properties":
					{
						"software":{"type":"string"},
						"repoName":{"type":"string"},
						"handler":{"type":"string"},
						"metadataSchema":
						{
							"properties":
							{
								"name":{"type":"string"},
								"uri":{"type":"string"}
							}
						}
					}
				}
			}
		},
		"organization":
		{
			"_parent":{"type":"object"},
			"properties":
			{
				"fullName": {"type":"string"},
				"appid": {"type":"string"},
				"appuri": {"type":"string"},
				"viaf": {"type":"string"},
				"url":{"properties":{"value":{"type":"string"},"broken":{"type":"boolean"}}},
				"contact":{"type":"string"},
				"address":{"type":"string"},
				"logo":{"type":"string"},
				"location":{"properties":{"value":{"type":"string","index":"not_analyzed"},"uri":{"type":"string"},"vocabulary":{"type":"string"}}}
			}
		},
		"person":
		{
			"_parent":{"type":"object"},
			"properties":
			{
				"fullName": {"type":"string"},
				"lastName": {"type":"string"},
				"firstName": {"type":"string"},
				"appid":{"type":"string"},
				"appuri":{"type":"string"},
				"orcid":{"type":"string"},
				"url": {"properties":{"value":{"type":"string"},"broken":{"type":"boolean"}}},
				"affiliation":{"properties":{"value":{"type":"string"},"id":{"type":"string"},"type":{"type":"string"},"uri":{"type":"string"}}},
				"location":{"properties":{"value":{"type":"string","index":"not_analyzed"},"uri":{"type":"string"},"vocabulary":{"type":"string"}}},
				"photo":{"type":"string"},
				"shortBio":{"type":"string"}
			}
		},
		"resource":
		{
			"_parent":{"type":"object"},
			"properties":
			{
				"type":
				{
					"type":"string",
					"fields":
                         		{
                                        	"raw":
                                                {
                                                	"type":"string",
                                                        "index":"not_analyzed"
                                                }
                                        }
				},
				"appid":{"type":"string"},
				"appuri":{"type":"string"},
				"creator":
				{
					"properties":
					{
						"value":
						{
							"type":"string",
							"fields":
							{
								"raw":
								{
									"type":"string",
									"index":"not_analyzed"
								}
							}
						},
						"id":{"type":"string"},"type":{"type":"string"},
						"uri":{"type":"string"}
					}
				},
				"contributor":{"properties":{"value":{"type":"string","index":"not_analyzed"},"id":{"type":"string"},"type":{"type":"string"},"uri":{"type":"string"}}},
				"publisher":{"properties":{"value":{"type":"string","index":"not_analyzed"},"id":{"type":"string"},"type":{"type":"string"},"uri":{"type":"string"}}},
				"date":
				{
					"type":"date",
					"format":"dateOptionalTime",
					"ignore_malformed":true
				},
				"updatedDate":{"format":"dateOptionalTime","type":"date","ignore_malformed":true},
				"issn":{"type":"string"},
				"isbn":{"type":"string"},
				"url":{"properties":{"value":{"type":"string"},"broken":{"type":"boolean"}}},
				"location":
				{
					"properties":
					{
						"value":
                                                {
                                                        "type":"string",
                                                        "fields":
                                                        {
                                                                "raw":
                                                                {
                                                                        "type":"string",
                                                                        "index":"not_analyzed"
                                                                }
                                                        }
                                                },
						"uri":{"type":"string"},
						"vocabulary":{"type":"string"}
					}
				},
				"coverage":{"type":"string"},
				"place":{"type":"string"},
				"page":{"type":"string"},
				"extent":{"type":"string"},
				"relation":
				{
					"type":"string",
					"fields":
                                        {
                                        	"raw":
                                                {
                                                	"type":"string",
                                                        "index":"not_analyzed"
                                                }
                                      	}
				},
				"rights":{"type":"string"},
				"citation":{"type":"string"},
				"doi":{"type":"string"},
				"format":{"type":"string"},
				"quality":{"type":"string"},
				"aggregation":
				{
					"properties":
					{
						"shownAt":
						{
							"properties":
							{
								"value":{"type":"string"},
								"broken":{"type":"boolean"}
							}
						},
						"shownBy":
						{ 
                                                        "properties":
                                                        { 
                                                                "value":{"type":"string"},
                                                                "broken":{"type":"boolean"}
                                                        }
                                                },
						"linkToResource":
						{
							"properties":
							{
								"value":{"type":"string"},
								"label":{"type":"string"},
								"category":{"type":"string"},
								"type":{"type":"string"},
								"size":{"type":"long"}
							}
						}
					}
				},
				"collection":
          			{
                                	"properties":
                               		{
                                  		"id":{"type":"string"},
                                            	"uri":{"type":"string"},
                                             	"type":{"type":"string"}
                               		}
                            	}
			}
		},
		"dataset_software":
		{
			"_parent":{"type":"object"},
			"properties":
			{
				"type":
				{
					"type":"string",
					"fields":
                                        {
                                                "raw":
                                                {
                                                        "type":"string",
                                                        "index":"not_analyzed"
                                                }
                                        }
				},
				"appid":{"type":"string"},
				"appuri":{"type":"string"},
				"creator":
                                {
					"properties":
					{
						"value":
                                                {
                                                        "type":"string",
                                                        "fields":
                                                        {
                                                                "raw":
                                                                {
                                                                        "type":"string",
                                                                        "index":"not_analyzed"
                                                                }
                                                        }
                                                },
						"id":{"type":"string"},"type":{"type":"string"},
						"uri":{"type":"string"}
					}
				},
				"publisher":
                                {"properties":{"value":{"type":"string","index":"not_analyzed"},"id":{"type":"string"},"type":{"type":"string"},"uri":{"type":"string"}}},
				"url":
				{"properties":{"value":{"type":"string"},"broken":{"type":"boolean"}}},
				"location":
				{
					
					"properties":
					{
						"value":
                                                {
                                                        "type":"string",
                                                        "fields":
                                                        {
                                                                "raw":
                                                                {
                                                                        "type":"string",
                                                                        "index":"not_analyzed"
                                                                }
                                                        }
                                                },
						"uri":{"type":"string"},
						"vocabulary":{"type":"string"}
					}
				},
				"date":{"format":"dateOptionalTime","type":"date","ignore_malformed":true},
                                "coverage":{"type":"string"},
                                "relation":
				{
					"type":"string",
					"fields":
                                        {
                                                "raw":
                                                {
                                                        "type":"string",
                                                        "index":"not_analyzed"
                                                }
                                        }
				},
                                "rights":{"type":"string"},
                                "citation":{"type":"string"},
				"kindOfData":{"type":"string"},
				"timePeriod":{"type":"string"},
				"funding":{"type":"string"},
				"notes":{"type":"string"},
				"aggregation":
                                {
                                        "properties":
                                        {
                                                "shownAt":
                                                {
                                                        "properties":
                                                        {
                                                                "value":{"type":"string"},
                                                                "broken":{"type":"boolean"}
                                                        }
                                                },
                                                "shownBy":
                                                {
                                                        "properties":
                                                        {
                                                                "value":{"type":"string"},
                                                                "broken":{"type":"boolean"}
                                                        }
                                                },
                                                "linkToResource":
                                                {
                                                        "properties":
                                                        {
                                                                "value":{"type":"string"},
                                                                "label":{"type":"string"},
                                                                "category":{"type":"string"},
                                                                "type":{"type":"string"},
                                                                "size":{"type":"long"}
                                                        }
						}
					}
				},
				"collection":
                                {
                                        "properties":
                                        {
                                                "id":{"type":"string"},
                                                "uri":{"type":"string"},
                                                "type":{"type":"string"}
                                        }
                                }
			}
		}
	}

}
